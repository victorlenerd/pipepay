{"version":3,"sources":["webpack:///./src/api/modules/transfer.js"],"names":["secret","getReceipt","name","account_number","bank_code","resolve","reject","request","post","set","send","currency","end","err","data","makeTransfer","recipient_code","amount","transfer","status","Error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,SAAS,kDAAf;;AAEA,IAAMC,aAAa,SAAbA,UAAa,CAACC,IAAD,EAAOC,cAAP,EAAuBC,SAAvB;AAAA,WAAqC,yEAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrFC,QAAA,iDAAAA,CACKC,IADL,8CAEKC,GAFL,CAES,eAFT,cAEoCT,MAFpC,EAGKU,IAHL,CAGU;AACF,oBAAQ,OADN;AAEFR,sBAFE;AAGFC,0CAHE;AAIFC,gCAJE;AAKFO,sBAAU;AALR,SAHV,EAUKC,GAVL,CAUS,UAACC,GAAD,EAAMC,IAAN,EAAe;AAChB,gBAAID,GAAJ,EAASP,OAAOO,GAAP;AACTR,oBAAQS,IAAR;AACH,SAbL;AAcH,KAfuD,CAArC;AAAA,CAAnB;;AAiBA,IAAMC,eAAe,SAAfA,YAAe,CAACC,cAAD,EAAiBC,MAAjB;AAAA,WAA4B,yEAAY,UAACZ,OAAD,EAAUC,MAAV,EAAqB;AAC9EC,QAAA,iDAAAA,CACKC,IADL,qCAEKC,GAFL,CAES,eAFT,cAEoCT,MAFpC,EAGKU,IAHL,CAGU;AACF,sBAAU,SADR;AAEFO,0BAFE;AAGFD,0CAHE;AAIFL,sBAAU;AAJR,SAHV,EASKC,GATL,CASS,UAACC,GAAD,EAAMC,IAAN,EAAe;AAChB,gBAAID,GAAJ,EAASP,OAAOO,GAAP;AACTR,oBAAQS,IAAR;AACH,SAZL;AAaH,KAdgD,CAA5B;AAAA,CAArB;;AAgBA,IAAMI,WAAW,SAAXA,QAAW,CAAChB,IAAD,EAAOC,cAAP,EAAuBC,SAAvB,EAAkCa,MAAlC;AAAA,WAA6C;AAAA,qLAAY,iBAAOZ,OAAP,EAAgBC,MAAhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAEdL,WAAWC,IAAX,EAAiBC,cAAjB,EAAiCC,SAAjC,CAFc;;AAAA;AAAA;AAE1De,kCAF0D,SAE1DA,MAF0D;AAE1CH,0CAF0C,SAElDF,IAFkD,CAE1CE,cAF0C;;AAAA,kCAI9DG,UAAUH,cAJoD;AAAA;AAAA;AAAA;;AAAA;AAAA,mCAKrCD,aAAaC,cAAb,EAA6BC,MAA7B,CALqC;;AAAA;AAAA;AAKtDE,mCALsD,SAKtDA,MALsD;;AAM9D,gCAAIA,OAAJ,EAAYd;AANkD;AAAA;;AAAA;AAQ9DC,mCAAO,IAAIc,KAAJ,CAAU,mBAAV,CAAP;;AAR8D;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAWlEd;;AAXkE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;;AAAA;AAAA;AAAA;AAAA,QAA7C;AAAA,CAAjB;;AAeA,+DAAeY,QAAf,E","file":"main.4bc6e1422ef0fb6d7ec7.hot-update.js","sourcesContent":["import request from 'superagent';\nconst secret = process.env.PAYSTACK_SECRET;\n\nconst getReceipt = (name, account_number, bank_code) => new Promise((resolve, reject) => {\n    request\n        .post(`https://api.paystack.co/transferrecipient`)\n        .set(\"Authorization\", `Bearer ${secret}`)\n        .send({\n            \"type\": \"nuban\",\n            name,\n            account_number,\n            bank_code,\n            currency: 'NGN'\n        })\n        .end((err, data) => {\n            if (err) reject(err);\n            resolve(data);\n        });\n})\n\nconst makeTransfer = (recipient_code, amount) => new Promise((resolve, reject) => {\n    request\n        .post(`https://api.paystack.co/transfer`)\n        .set(\"Authorization\", `Bearer ${secret}`)\n        .send({\n            \"source\": \"balance\",\n            amount,\n            recipient_code,\n            currency: 'NGN'\n        })\n        .end((err, data) => {\n            if (err) reject(err);\n            resolve(data);\n        });\n});\n\nconst transfer = (name, account_number, bank_code, amount) => new Promise(async (resolve, reject) => {\n    try {\n        const { status, data: { recipient_code  } } = await getReceipt(name, account_number, bank_code);\n\n        if (status && recipient_code) {\n            const { status } = await makeTransfer(recipient_code, amount);\n            if (status) resolve();\n        } else {\n            reject(new Error('No recipient_code'));\n        }\n    } catch(err) {\n        reject(err);\n    }\n});\n\nexport default transfer;"],"sourceRoot":""}